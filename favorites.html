<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>YÃªu thÃ­ch - Kvone Coffee</title>
    <meta name="description" content="Danh sÃ¡ch sáº£n pháº©m yÃªu thÃ­ch cá»§a báº¡n" />
    <link rel="icon" type="image/png" href="menu/icons/coffee.png" />

    <!-- View Transitions API -->
    <meta name="view-transition" content="same-origin" />
    <meta name="theme-color" content="#54372b" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="css/main.css" />
  </head>

  <body>
    <div class="page-wrapper">
      <!-- Header -->
      <header class="header">
        <div class="header-container">
          <a href="index.html" class="logo">
            <span class="logo-icon">â˜•</span>
            <span>Kvone Coffee</span>
          </a>

          <nav class="nav" id="mainNav">
            <a href="index.html" class="nav-link">Menu</a>
            <a href="favorites.html" class="nav-link active">YÃªu thÃ­ch</a>
            <a href="orders.html" class="nav-link">ÄÆ¡n hÃ ng</a>
          </nav>

          <div class="header-actions">
            <a href="cart.html" class="cart-btn">
              ğŸ›’
              <span class="cart-badge" style="display: none">0</span>
            </a>

            <div
              class="user-menu"
              id="userMenu"
              style="display: none"
              onclick="toggleUserDropdown()"
            >
              <div class="avatar">U</div>
              <span class="user-name">User</span>
            </div>

            <div id="authLinks" style="display: flex; gap: var(--space-2)">
              <a href="login.html" class="btn btn-ghost btn-sm">ÄÄƒng nháº­p</a>
              <a href="register.html" class="btn btn-secondary btn-sm"
                >ÄÄƒng kÃ½</a
              >
            </div>

            <button class="mobile-menu-btn btn btn-ghost" id="mobileMenuBtn" onclick="document.querySelector('.nav').classList.toggle('active')">
              â˜°
            </button>
          </div>
        </div>
      </header>

      <main class="main-content">
        <div
          class="container"
          style="padding: var(--space-8) var(--container-padding)"
        >
          <h1 style="margin-bottom: var(--space-6)">â¤ï¸ Sáº£n pháº©m yÃªu thÃ­ch</h1>

          <div class="product-grid" id="favoritesGrid">
            <!-- Render báº±ng JavaScript -->
          </div>
        </div>
      </main>

      <!-- Footer -->
      <footer class="footer">
        <div class="footer-container">
          <div class="footer-brand">
            <div class="footer-logo">
              <span>â˜•</span>
              <span>Kvone Coffee</span>
            </div>
            <p class="footer-desc">
              NÆ¡i má»—i ly cÃ  phÃª lÃ  má»™t tÃ¡c pháº©m nghá»‡ thuáº­t, Ä‘Æ°á»£c pha cháº¿ vá»›i
              tÃ¬nh yÃªu vÃ  sá»± táº­n tÃ¢m.
            </p>
          </div>

          <div>
            <h4 class="footer-title">LiÃªn káº¿t</h4>
            <div class="footer-links">
              <a href="index.html" class="footer-link">â˜• Menu</a>
              <a href="favorites.html" class="footer-link">ğŸ’• YÃªu thÃ­ch</a>
              <a href="orders.html" class="footer-link">ğŸ“‹ ÄÆ¡n hÃ ng</a>
            </div>
          </div>

          <div>
            <h4 class="footer-title">LiÃªn há»‡</h4>
            <div class="footer-links">
              <span class="footer-link">ğŸ“ Nguyá»…n VÄƒn Linh, ÄÃ  Náºµng</span>
              <span class="footer-link">ğŸ“ 0905580275</span>
              <span class="footer-link">âœ‰ï¸ kvonecoffee@gmail.com</span>
              <span class="footer-link">â° 7:00 - 22:00 hÃ ng ngÃ y</span>
            </div>
          </div>
        </div>
        <div class="footer-bottom">
          Â© 2024 Kvone Coffee. Made with â¤ï¸ for coffee lovers.
        </div>
      </footer>
    </div>

    <!-- User Dropdown Menu -->
    <div
      id="userDropdown"
      class="card"
      style="
        display: none;
        position: fixed;
        top: 70px;
        right: 100px;
        min-width: 220px;
        z-index: 1000;
        box-shadow: var(--shadow-2xl);
      "
    >
      <div class="card-body" style="padding: var(--space-2)">
        <a
          href="orders.html"
          class="btn btn-ghost w-full"
          style="justify-content: flex-start; gap: var(--space-3)"
          >ğŸ“‹ ÄÆ¡n hÃ ng cá»§a tÃ´i</a
        >
        <a
          href="favorites.html"
          class="btn btn-ghost w-full"
          style="justify-content: flex-start; gap: var(--space-3)"
          >â¤ï¸ YÃªu thÃ­ch</a
        >
        <a
          href="admin.html"
          id="adminLink"
          class="btn btn-ghost w-full"
          style="
            display: none;
            justify-content: flex-start;
            gap: var(--space-3);
            color: var(--color-primary);
          "
        >
          âš™ï¸ Quáº£n lÃ½ Admin
        </a>
        <div class="divider" style="margin: var(--space-2) 0"></div>
        <button
          class="btn btn-ghost w-full"
          style="
            justify-content: flex-start;
            gap: var(--space-3);
            color: var(--color-error);
          "
          onclick="logout()"
        >
          ğŸšª ÄÄƒng xuáº¥t
        </button>
      </div>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/products.js"></script>
    <script src="js/sizes.js"></script>
    <script src="js/toppings.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/favorites.js"></script>
    <script src="js/app.js"></script>
    <script src="js/enhancements.js"></script>
    <script>
      // Toggle user dropdown
      function toggleUserDropdown() {
        const dropdown = document.getElementById("userDropdown");
        dropdown.style.display =
          dropdown.style.display === "none" ? "block" : "none";
      }

      // ÄÃ³ng dropdown khi click bÃªn ngoÃ i
      document.addEventListener("click", function (e) {
        const userMenu = document.getElementById("userMenu");
        const dropdown = document.getElementById("userDropdown");

        if (!userMenu?.contains(e.target) && !dropdown?.contains(e.target)) {
          if (dropdown) dropdown.style.display = "none";
        }
      });

      // Khá»Ÿi táº¡o trang
      document.addEventListener("DOMContentLoaded", function () {
        initApp();

        // Hiá»ƒn thá»‹ Admin link náº¿u lÃ  admin
        if (isAdmin()) {
          const adminLink = document.getElementById("adminLink");
          if (adminLink) adminLink.style.display = "flex";
        }

        // Kiá»ƒm tra Ä‘Äƒng nháº­p
        if (!isLoggedIn()) {
          document.getElementById("favoritesGrid").innerHTML = `
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <div class="empty-state-icon">ğŸ”</div>
                        <h3 class="empty-state-title">Vui lÃ²ng Ä‘Äƒng nháº­p</h3>
                        <p class="empty-state-text">ÄÄƒng nháº­p Ä‘á»ƒ xem danh sÃ¡ch yÃªu thÃ­ch cá»§a báº¡n.</p>
                        <a href="login.html?return=${encodeURIComponent(
                          window.location.href
                        )}" class="btn btn-primary">ÄÄƒng nháº­p</a>
                    </div>
                `;
          return;
        }

        // Render favorites
        renderFavorites(document.getElementById("favoritesGrid"));
      });
    </script>
  </body>
</html>
